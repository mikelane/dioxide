<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scan Performance: Eager vs Lazy â€” dioxide demos</title>
    <link rel="stylesheet" href="../styles.css">
    <style>
        .back-link {
            display: inline-block;
            margin-bottom: 1.5rem;
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .back-link:hover {
            color: var(--brand);
        }

        .demo-title {
            font-size: 1.75rem;
            font-weight: 800;
            letter-spacing: -0.02em;
            margin-bottom: 0.5rem;
        }

        .demo-subtitle {
            color: var(--text-secondary);
            font-size: 1rem;
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .video-container {
            position: relative;
            background: #0d0d0d;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            margin-bottom: 2rem;
        }

        .video-container video {
            display: block;
            width: 100%;
            height: auto;
        }

        .demo-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        @media (max-width: 600px) {
            .demo-details {
                grid-template-columns: 1fr;
            }

            .demo-title {
                font-size: 1.35rem;
            }
        }

        .detail-card {
            background: var(--bg-surface);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 1.25rem;
        }

        .detail-card h3 {
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--text-muted);
            margin-bottom: 0.75rem;
        }

        .detail-card p {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.6;
        }

        .tagline {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--text-primary);
            text-align: center;
            padding: 1.5rem;
            border-top: 1px solid var(--border);
            border-bottom: 1px solid var(--border);
            margin-bottom: 2rem;
        }
    </style>
</head>
<body>
    <main>
        <a class="back-link animate-in" href="../">&larr; All demos</a>

        <h1 class="demo-title animate-in delay-1">Scan Performance: Eager vs Lazy</h1>
        <p class="demo-subtitle animate-in delay-1">See the difference between eager scanning (imports everything upfront) and lazy scanning (defers imports until you actually resolve a dependency). Three adapters with expensive imports tell the whole story.</p>

        <div class="video-container animate-in delay-2">
            <video controls preload="metadata">
                <source src="../videos/scan-performance.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </div>

        <div class="tagline animate-in delay-3">
            Load what you need, when you need it.
        </div>

        <div class="demo-details animate-in delay-3">
            <div class="detail-card">
                <h3>The Problem</h3>
                <p>Eager scanning imports every module in your package at startup. If adapters load heavy SDKs (Stripe, SendGrid, analytics), your app pays the cost for all of them, even if it only needs one.</p>
            </div>
            <div class="detail-card">
                <h3>The Solution</h3>
                <p>Pass <code>lazy=True</code> to <code>container.scan()</code>. Dioxide uses AST parsing to discover adapter-to-port mappings without importing. Modules load only when <code>resolve()</code> is called.</p>
            </div>
        </div>

        <div class="demo-details animate-in delay-4">
            <div class="detail-card">
                <h3>Source Code</h3>
                <p>
                    <a href="https://github.com/mikelane/dioxide/tree/main/demos/scan-performance">Browse on GitHub</a>
                </p>
            </div>
            <div class="detail-card">
                <h3>Learn More</h3>
                <p>
                    <a href="https://dioxide.readthedocs.io">dioxide documentation</a><br>
                    <a href="https://github.com/mikelane/dioxide/issues/385">Issue #385</a>
                </p>
            </div>
        </div>
    </main>

    <footer class="animate-in delay-5">
        <a href="https://github.com/mikelane/dioxide">dioxide</a> &mdash;
        Declarative dependency injection for Python, powered by Rust.
    </footer>
</body>
</html>
